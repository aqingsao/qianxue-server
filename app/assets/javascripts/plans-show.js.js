// Generated by CoffeeScript 1.4.0
var calcDate, planIdReg;

this.setActiveNav("nav-plans");

planIdReg = /plans\/(\d)/;

calcDate = function(timeInSeconds) {
  return Math.floor(timeInSeconds / 86400);
};

angular.module('myapp', []).controller("PlanCtrl", function($scope, $http) {
  var id,
    _this = this;
  id = planIdReg.exec(window.location.href)[1];
  return $http.get('/api/plans/' + id).success(function(plan) {
    plan.remaining_date = calcDate(plan.remaining_date);
    $http.get('/api/noteBooks/' + plan.noteBook_id).success(function(book) {
      return plan.book = book;
    });
    console.log(plan);
    return $scope.plan = plan;
  });
});
